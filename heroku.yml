build:
  docker:
    web: fantasy-app/Dockerfile
    api: FastAPI/Dockerfile
    worker: docker/worker/Dockerfile
    beat: docker/worker/Dockerfile

  run:
    web: npm run start:prod
    api: uvicorn FastAPI.main:app --host 0.0.0.0 --port 8000 --reload
    worker: celery -A FastAPI.services.scrape_worker worker --loglevel=info
    beat: celery -A FastAPI.services.scrape_worker beat --loglevel=info

  setup:
    addons:
      - plan: heroku-redis:hobby-dev
    config:
      MONGODB_URL: ${MONGODB_URL}