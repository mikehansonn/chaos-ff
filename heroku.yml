// heroku.yml
setup:
  addons:
    - plan: heroku-redis:hobby-dev
      as: REDIS
  config:
    MONGODB_URL: ${MONGODB_URL}

build:
  docker:
    api: docker/api/Dockerfile
    worker: docker/worker/Dockerfile
    beat: docker/worker/Dockerfile
    web: fantasy-app/Dockerfile

run:
  api: uvicorn main:app --host 0.0.0.0 --port $PORT
  worker: celery -A services.scrape_worker worker --loglevel=info
  beat: celery -A services.scrape_worker beat --loglevel=info
  web: npm start